<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jay Thakur">

<title>ST_558_HW9</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="fullcontent">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ST_558_HW9</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jay Thakur </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="st-558-hw9" class="level1">
<h1>ST 558 HW9</h1>
<p>From Model Training, Homework 9 starts. Everything else is preprocessing and uses Variables from Homework 8.</p>
<section id="reading-data" class="level2">
<h2 class="anchored" data-anchor-id="reading-data">Reading Data</h2>
<section id="loading-all-req-libraries" class="level5">
<h5 class="anchored" data-anchor-id="loading-all-req-libraries">Loading all req libraries</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ────────────────────────────────────── tidymodels 1.2.0 ──</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>✔ broom        1.0.6      ✔ recipes      1.0.10
✔ dials        1.3.0      ✔ rsample      1.2.1 
✔ dplyr        1.1.4      ✔ tibble       3.2.1 
✔ ggplot2      3.5.1      ✔ tidyr        1.3.1 
✔ infer        1.0.7      ✔ tune         1.2.1 
✔ modeldata    1.4.0      ✔ workflows    1.1.4 
✔ parsnip      1.2.1      ✔ workflowsets 1.1.0 
✔ purrr        1.0.2      ✔ yardstick    1.3.1 </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'broom' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dials' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'modeldata' was built under R version 4.3.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──
✖ purrr::discard() masks scales::discard()
✖ dplyr::filter()  masks stats::filter()
✖ dplyr::lag()     masks stats::lag()
✖ recipes::step()  masks stats::step()
• Dig deeper into tidy modeling with R at https://www.tmwr.org</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'lubridate'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    date, intersect, setdiff, union</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'readr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:yardstick':

    spec</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:scales':

    col_factor</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ranger)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'ranger' was built under R version 4.3.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glmnet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: Matrix</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'Matrix'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:tidyr':

    expand, pack, unpack</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loaded glmnet 4.1-8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rpart)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'rpart'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dials':

    prune</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(baguette)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="reading-through-the-data" class="level4">
<h4 class="anchored" data-anchor-id="reading-through-the-data">Reading through the data</h4>
<p>Using read.csv to read data and as I was having issue with header I decided to drop and reassign names to headers (Same dataset was used for my Project 2)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the CSV file</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"SeoulBikeData.csv"</span>, <span class="at">header =</span> <span class="cn">FALSE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove the first row</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="sc">-</span><span class="dv">1</span>, ]</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"date"</span>, <span class="st">"rented_bike_count"</span>, <span class="st">"hour"</span>, <span class="st">"temperature"</span>, <span class="st">"humidity"</span>, </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"wind_speed"</span>, <span class="st">"visibility"</span>, <span class="st">"dew_point_temp"</span>, <span class="st">"solar_radiation"</span>,</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"rainfall"</span>, <span class="st">"snowfall"</span>, <span class="st">"seasons"</span>, <span class="st">"holiday"</span>, <span class="st">"functioning_day"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="eda" class="level2">
<h2 class="anchored" data-anchor-id="eda">EDA</h2>
<section id="checking-for-missing-values-if-any" class="level4">
<h4 class="anchored" data-anchor-id="checking-for-missing-values-if-any">Checking for missing values if any</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>missing_summary <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(.))))</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(missing_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  date rented_bike_count hour temperature humidity wind_speed visibility
1    0                 0    0           0        0          0          0
  dew_point_temp solar_radiation rainfall snowfall seasons holiday
1              0               0        0        0       0       0
  functioning_day
1               0</code></pre>
</div>
</div>
</section>
<section id="check-column-types-and-summary" class="level4">
<h4 class="anchored" data-anchor-id="check-column-types-and-summary">Check column types and summary</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 8,760
Columns: 14
$ date              &lt;chr&gt; "01/12/2017", "01/12/2017", "01/12/2017", "01/12/201…
$ rented_bike_count &lt;chr&gt; "254", "204", "173", "107", "78", "100", "181", "460…
$ hour              &lt;chr&gt; "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "1…
$ temperature       &lt;chr&gt; "-5.2", "-5.5", "-6", "-6.2", "-6", "-6.4", "-6.6", …
$ humidity          &lt;chr&gt; "37", "38", "39", "40", "36", "37", "35", "38", "37"…
$ wind_speed        &lt;chr&gt; "2.2", "0.8", "1", "0.9", "2.3", "1.5", "1.3", "0.9"…
$ visibility        &lt;chr&gt; "2000", "2000", "2000", "2000", "2000", "2000", "200…
$ dew_point_temp    &lt;chr&gt; "-17.6", "-17.6", "-17.7", "-17.6", "-18.6", "-18.7"…
$ solar_radiation   &lt;chr&gt; "0", "0", "0", "0", "0", "0", "0", "0", "0.01", "0.2…
$ rainfall          &lt;chr&gt; "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0…
$ snowfall          &lt;chr&gt; "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0…
$ seasons           &lt;chr&gt; "Winter", "Winter", "Winter", "Winter", "Winter", "W…
$ holiday           &lt;chr&gt; "No Holiday", "No Holiday", "No Holiday", "No Holida…
$ functioning_day   &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "Ye…</code></pre>
</div>
</div>
</section>
<section id="summary-statistics-for-numeric-and-categorical-columns" class="level4">
<h4 class="anchored" data-anchor-id="summary-statistics-for-numeric-and-categorical-columns">Summary statistics for numeric and categorical columns</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>numeric_summary <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="fu">list</span>(<span class="at">min =</span> min, <span class="at">mean =</span> mean, <span class="at">max =</span> max), <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: There was 1 warning in `summarise()`.
ℹ In argument: `across(...)`.
Caused by warning:
! The `...` argument of `across()` is deprecated as of dplyr 1.1.0.
Supply arguments directly to `.fns` through an anonymous function instead.

  # Previously
  across(a:b, mean, na.rm = TRUE)

  # Now
  across(a:b, \(x) mean(x, na.rm = TRUE))</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(numeric_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>data frame with 0 columns and 1 row</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>categorical_summary <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.character), <span class="sc">~</span> <span class="fu">list</span>(<span class="fu">unique</span>(.))))</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(categorical_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        date
1 01/12/2017, 02/12/2017, 03/12/2017, 04/12/2017, 05/12/2017, 06/12/2017, 07/12/2017, 08/12/2017, 09/12/2017, 10/12/2017, 11/12/2017, 12/12/2017, 13/12/2017, 14/12/2017, 15/12/2017, 16/12/2017, 17/12/2017, 18/12/2017, 19/12/2017, 20/12/2017, 21/12/2017, 22/12/2017, 23/12/2017, 24/12/2017, 25/12/2017, 26/12/2017, 27/12/2017, 28/12/2017, 29/12/2017, 30/12/2017, 31/12/2017, 01/01/2018, 02/01/2018, 03/01/2018, 04/01/2018, 05/01/2018, 06/01/2018, 07/01/2018, 08/01/2018, 09/01/2018, 10/01/2018, 11/01/2018, 12/01/2018, 13/01/2018, 14/01/2018, 15/01/2018, 16/01/2018, 17/01/2018, 18/01/2018, 19/01/2018, 20/01/2018, 21/01/2018, 22/01/2018, 23/01/2018, 24/01/2018, 25/01/2018, 26/01/2018, 27/01/2018, 28/01/2018, 29/01/2018, 30/01/2018, 31/01/2018, 01/02/2018, 02/02/2018, 03/02/2018, 04/02/2018, 05/02/2018, 06/02/2018, 07/02/2018, 08/02/2018, 09/02/2018, 10/02/2018, 11/02/2018, 12/02/2018, 13/02/2018, 14/02/2018, 15/02/2018, 16/02/2018, 17/02/2018, 18/02/2018, 19/02/2018, 20/02/2018, 21/02/2018, 22/02/2018, 23/02/2018, 24/02/2018, 25/02/2018, 26/02/2018, 27/02/2018, 28/02/2018, 01/03/2018, 02/03/2018, 03/03/2018, 04/03/2018, 05/03/2018, 06/03/2018, 07/03/2018, 08/03/2018, 09/03/2018, 10/03/2018, 11/03/2018, 12/03/2018, 13/03/2018, 14/03/2018, 15/03/2018, 16/03/2018, 17/03/2018, 18/03/2018, 19/03/2018, 20/03/2018, 21/03/2018, 22/03/2018, 23/03/2018, 24/03/2018, 25/03/2018, 26/03/2018, 27/03/2018, 28/03/2018, 29/03/2018, 30/03/2018, 31/03/2018, 01/04/2018, 02/04/2018, 03/04/2018, 04/04/2018, 05/04/2018, 06/04/2018, 07/04/2018, 08/04/2018, 09/04/2018, 10/04/2018, 11/04/2018, 12/04/2018, 13/04/2018, 14/04/2018, 15/04/2018, 16/04/2018, 17/04/2018, 18/04/2018, 19/04/2018, 20/04/2018, 21/04/2018, 22/04/2018, 23/04/2018, 24/04/2018, 25/04/2018, 26/04/2018, 27/04/2018, 28/04/2018, 29/04/2018, 30/04/2018, 01/05/2018, 02/05/2018, 03/05/2018, 04/05/2018, 05/05/2018, 06/05/2018, 07/05/2018, 08/05/2018, 09/05/2018, 10/05/2018, 11/05/2018, 12/05/2018, 13/05/2018, 14/05/2018, 15/05/2018, 16/05/2018, 17/05/2018, 18/05/2018, 19/05/2018, 20/05/2018, 21/05/2018, 22/05/2018, 23/05/2018, 24/05/2018, 25/05/2018, 26/05/2018, 27/05/2018, 28/05/2018, 29/05/2018, 30/05/2018, 31/05/2018, 01/06/2018, 02/06/2018, 03/06/2018, 04/06/2018, 05/06/2018, 06/06/2018, 07/06/2018, 08/06/2018, 09/06/2018, 10/06/2018, 11/06/2018, 12/06/2018, 13/06/2018, 14/06/2018, 15/06/2018, 16/06/2018, 17/06/2018, 18/06/2018, 19/06/2018, 20/06/2018, 21/06/2018, 22/06/2018, 23/06/2018, 24/06/2018, 25/06/2018, 26/06/2018, 27/06/2018, 28/06/2018, 29/06/2018, 30/06/2018, 01/07/2018, 02/07/2018, 03/07/2018, 04/07/2018, 05/07/2018, 06/07/2018, 07/07/2018, 08/07/2018, 09/07/2018, 10/07/2018, 11/07/2018, 12/07/2018, 13/07/2018, 14/07/2018, 15/07/2018, 16/07/2018, 17/07/2018, 18/07/2018, 19/07/2018, 20/07/2018, 21/07/2018, 22/07/2018, 23/07/2018, 24/07/2018, 25/07/2018, 26/07/2018, 27/07/2018, 28/07/2018, 29/07/2018, 30/07/2018, 31/07/2018, 01/08/2018, 02/08/2018, 03/08/2018, 04/08/2018, 05/08/2018, 06/08/2018, 07/08/2018, 08/08/2018, 09/08/2018, 10/08/2018, 11/08/2018, 12/08/2018, 13/08/2018, 14/08/2018, 15/08/2018, 16/08/2018, 17/08/2018, 18/08/2018, 19/08/2018, 20/08/2018, 21/08/2018, 22/08/2018, 23/08/2018, 24/08/2018, 25/08/2018, 26/08/2018, 27/08/2018, 28/08/2018, 29/08/2018, 30/08/2018, 31/08/2018, 01/09/2018, 02/09/2018, 03/09/2018, 04/09/2018, 05/09/2018, 06/09/2018, 07/09/2018, 08/09/2018, 09/09/2018, 10/09/2018, 11/09/2018, 12/09/2018, 13/09/2018, 14/09/2018, 15/09/2018, 16/09/2018, 17/09/2018, 18/09/2018, 19/09/2018, 20/09/2018, 21/09/2018, 22/09/2018, 23/09/2018, 24/09/2018, 25/09/2018, 26/09/2018, 27/09/2018, 28/09/2018, 29/09/2018, 30/09/2018, 01/10/2018, 02/10/2018, 03/10/2018, 04/10/2018, 05/10/2018, 06/10/2018, 07/10/2018, 08/10/2018, 09/10/2018, 10/10/2018, 11/10/2018, 12/10/2018, 13/10/2018, 14/10/2018, 15/10/2018, 16/10/2018, 17/10/2018, 18/10/2018, 19/10/2018, 20/10/2018, 21/10/2018, 22/10/2018, 23/10/2018, 24/10/2018, 25/10/2018, 26/10/2018, 27/10/2018, 28/10/2018, 29/10/2018, 30/10/2018, 31/10/2018, 01/11/2018, 02/11/2018, 03/11/2018, 04/11/2018, 05/11/2018, 06/11/2018, 07/11/2018, 08/11/2018, 09/11/2018, 10/11/2018, 11/11/2018, 12/11/2018, 13/11/2018, 14/11/2018, 15/11/2018, 16/11/2018, 17/11/2018, 18/11/2018, 19/11/2018, 20/11/2018, 21/11/2018, 22/11/2018, 23/11/2018, 24/11/2018, 25/11/2018, 26/11/2018, 27/11/2018, 28/11/2018, 29/11/2018, 30/11/2018
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           rented_bike_count
1 254, 204, 173, 107, 78, 100, 181, 460, 930, 490, 339, 360, 449, 451, 447, 463, 484, 555, 862, 600, 426, 405, 398, 323, 328, 308, 262, 167, 89, 79, 70, 146, 219, 334, 388, 479, 606, 611, 589, 618, 572, 489, 385, 359, 377, 354, 366, 342, 227, 228, 117, 76, 32, 13, 22, 85, 152, 200, 273, 333, 495, 563, 621, 598, 545, 443, 422, 397, 350, 303, 285, 186, 112, 65, 41, 82, 498, 937, 509, 311, 379, 393, 391, 338, 341, 375, 515, 807, 568, 353, 248, 216, 198, 124, 62, 42, 172, 381, 812, 462, 269, 321, 325, 435, 529, 789, 597, 418, 415, 244, 145, 144, 58, 87, 142, 802, 440, 307, 442, 416, 412, 496, 239, 205, 190, 165, 222, 193, 218, 149, 102, 83, 137, 367, 754, 431, 394, 390, 430, 471, 552, 795, 507, 402, 389, 259, 233, 230, 131, 99, 71, 84, 158, 387, 780, 395, 261, 310, 355, 362, 401, 500, 752, 477, 384, 336, 347, 275, 267, 296, 237, 169, 96, 56, 127, 291, 351, 427, 486, 569, 546, 481, 298, 289, 265, 326, 280, 243, 9, 20, 35, 31, 19, 119, 182, 235, 180, 214, 226, 210, 148, 125, 111, 67, 45, 44, 86, 136, 653, 212, 247, 241, 253, 277, 361, 557, 371, 266, 174, 133, 95, 54, 46, 104, 580, 184, 201, 225, 258, 250, 305, 260, 270, 256, 168, 183, 120, 68, 109, 591, 340, 202, 251, 240, 278, 392, 537, 373, 263, 271, 171, 170, 80, 52, 108, 279, 189, 282, 294, 301, 335, 382, 612, 410, 316, 309, 211, 162, 110, 69, 129, 658, 330, 221, 329, 464, 682, 320, 300, 217, 302, 66, 90, 195, 252, 292, 143, 159, 155, 175, 132, 39, 53, 94, 122, 223, 268, 157, 166, 138, 151, 97, 38, 29, 27, 36, 116, 281, 160, 128, 93, 55, 199, 191, 178, 276, 224, 213, 466, 209, 197, 153, 49, 423, 290, 255, 531, 288, 196, 161, 64, 114, 283, 544, 386, 671, 314, 249, 337, 312, 59, 63, 188, 473, 453, 12, 3, 4, 7, 28, 115, 72, 61, 179, 274, 319, 272, 185, 176, 578, 293, 246, 317, 220, 156, 81, 105, 502, 231, 315, 242, 164, 163, 50, 103, 257, 554, 286, 407, 332, 135, 636, 363, 370, 419, 504, 534, 574, 236, 234, 192, 88, 208, 356, 345, 40, 30, 43, 25, 215, 206, 121, 139, 344, 203, 154, 655, 295, 675, 403, 364, 304, 130, 670, 297, 299, 637, 150, 123, 57, 646, 264, 284, 603, 417, 306, 118, 47, 75, 327, 665, 232, 343, 446, 635, 322, 48, 245, 352, 207, 60, 331, 368, 349, 77, 374, 701, 318, 126, 558, 177, 437, 98, 33, 187, 92, 140, 106, 134, 74, 444, 365, 455, 141, 51, 650, 376, 592, 409, 380, 501, 313, 506, 648, 468, 702, 101, 406, 73, 396, 383, 683, 18, 24, 34, 113, 147, 21, 26, 450, 438, 491, 238, 229, 37, 459, 194, 542, 91, 23, 433, 469, 448, 564, 378, 659, 517, 475, 604, 461, 559, 14, 372, 404, 522, 819, 533, 357, 727, 514, 764, 358, 718, 784, 783, 465, 730, 499, 348, 346, 470, 669, 421, 454, 467, 482, 688, 786, 428, 521, 929, 619, 483, 512, 767, 411, 897, 616, 816, 17, 8, 11, 10, 458, 617, 631, 854, 414, 605, 771, 1025, 1238, 1285, 1197, 920, 630, 588, 516, 15, 429, 492, 436, 2, 550, 865, 1155, 782, 583, 997, 556, 528, 567, 680, 883, 1246, 833, 666, 625, 1032, 566, 441, 505, 620, 849, 1365, 799, 587, 452, 594, 757, 1091, 586, 1041, 570, 510, 686, 834, 1231, 535, 497, 906, 931, 972, 829, 664, 573, 425, 843, 1154, 1294, 1205, 1028, 776, 596, 530, 662, 1066, 581, 694, 1425, 946, 801, 695, 668, 1215, 571, 626, 678, 705, 815, 890, 1085, 1749, 1224, 986, 982, 912, 1371, 761, 643, 813, 878, 1049, 1325, 2100, 1478, 1275, 1181, 983, 676, 287, 652, 1176, 715, 772, 923, 976, 1160, 1641, 974, 774, 710, 660, 520, 561, 742, 933, 1111, 1514, 1440, 1272, 934, 624, 562, 751, 881, 993, 1128, 1059, 1200, 818, 711, 731, 565, 677, 1212, 661, 488, 478, 518, 719, 716, 543, 494, 1097, 614, 615, 1174, 674, 758, 999, 1495, 739, 726, 1216, 584, 690, 901, 1108, 1611, 932, 724, 638, 424, 456, 806, 880, 855, 947, 916, 736, 513, 487, 882, 960, 1031, 911, 768, 540, 575, 925, 1477, 835, 798, 1201, 699, 560, 1521, 1020, 864, 866, 527, 400, 741, 1353, 723, 629, 698, 785, 943, 1221, 1839, 1288, 1133, 1035, 907, 781, 1281, 714, 957, 1194, 1776, 1260, 1079, 1046, 949, 747, 1406, 939, 860, 965, 1068, 1156, 1460, 1935, 1268, 1045, 948, 642, 824, 1072, 1218, 1381, 1542, 1578, 1531, 1391, 1010, 922, 579, 485, 737, 926, 1349, 1409, 1362, 1296, 984, 841, 918, 1469, 1569, 2401, 1779, 1517, 1503, 1213, 803, 532, 1033, 1677, 867, 696, 913, 870, 961, 1173, 1436, 2134, 1415, 1470, 1223, 1030, 1284, 744, 928, 951, 1096, 1209, 1413, 1745, 2402, 1626, 1374, 1256, 1235, 756, 585, 1114, 508, 399, 553, 697, 852, 919, 908, 709, 847, 777, 651, 1163, 644, 869, 921, 1038, 1185, 1479, 1599, 1232, 1069, 623, 981, 1702, 703, 839, 1023, 967, 1080, 1004, 1805, 1153, 0, 1054, 1789, 952, 969, 1029, 990, 1074, 1273, 1664, 2359, 1319, 1241, 1142, 525, 432, 1721, 1095, 973, 1063, 1270, 1662, 2404, 1359, 1311, 1178, 445, 706, 640, 633, 503, 582, 797, 1105, 1229, 1083, 1713, 700, 1052, 1016, 1145, 1452, 1753, 2692, 1719, 1498, 1355, 1099, 733, 1100, 1920, 1013, 822, 1112, 1007, 1037, 1120, 1312, 1632, 1727, 1356, 1290, 1320, 1071, 1815, 987, 845, 1047, 975, 1149, 1346, 1738, 1918, 842, 1003, 996, 1039, 1198, 1534, 2198, 1489, 1313, 1165, 979, 1659, 962, 708, 805, 1019, 970, 1206, 1543, 2268, 1358, 1183, 891, 707, 628, 324, 647, 872, 1130, 1315, 1511, 1730, 1942, 2032, 1986, 1711, 1581, 1491, 1292, 988, 826, 6, 5, 1502, 814, 942, 971, 1118, 1462, 2318, 1580, 1332, 1372, 725, 536, 1123, 1900, 938, 1192, 1141, 1161, 1180, 1447, 1878, 2807, 1958, 1651, 1593, 1382, 692, 1124, 1933, 1027, 745, 1084, 1227, 1386, 1796, 2574, 1891, 1146, 851, 663, 1129, 1922, 985, 1115, 1253, 1446, 1877, 2577, 1812, 1499, 1278, 672, 808, 1000, 1404, 1597, 1875, 1945, 2043, 1882, 1590, 1435, 1351, 905, 790, 787, 1060, 1375, 1635, 1814, 2019, 2044, 2094, 1950, 1712, 1485, 820, 1075, 1791, 1094, 1055, 1168, 1344, 1706, 2558, 2064, 1703, 1456, 1044, 1067, 1024, 1002, 1117, 1493, 1536, 1639, 1759, 1898, 2082, 1696, 1656, 1644, 1400, 413, 609, 1946, 1061, 762, 794, 871, 590, 1421, 2310, 1663, 1401, 1388, 1202, 832, 480, 2041, 1021, 1222, 1266, 1323, 1501, 1857, 2661, 1890, 1389, 1298, 935, 796, 759, 877, 1258, 1408, 1669, 1837, 2014, 1929, 1562, 1551, 1360, 16, 770, 1482, 1737, 1848, 1526, 1450, 778, 895, 1167, 1414, 1665, 1970, 2191, 2213, 2392, 1912, 1717, 1336, 994, 712, 1280, 1976, 792, 956, 1135, 1267, 1457, 2020, 2142, 2241, 1726, 1513, 1283, 1333, 2068, 954, 1015, 1242, 1188, 1186, 1324, 1603, 2034, 3130, 2405, 1979, 1940, 1602, 1073, 1881, 850, 1177, 1295, 1496, 1863, 2701, 1999, 941, 1556, 1434, 2055, 2329, 2379, 2410, 2338, 2023, 1714, 1571, 1251, 1997, 1106, 779, 1051, 1171, 1433, 2906, 2236, 1965, 1885, 1648, 1239, 2059, 1148, 944, 1058, 1092, 1210, 1458, 1951, 2915, 2248, 1944, 1640, 848, 1182, 2261, 1751, 1263, 689, 526, 766, 1573, 1865, 2128, 2479, 2355, 2439, 2140, 1872, 1780, 1595, 1169, 713, 524, 899, 1559, 1680, 2143, 2403, 2145, 1846, 1636, 420, 1785, 1373, 1483, 1612, 1820, 2214, 3069, 2450, 2167, 2065, 1832, 810, 1119, 1438, 1798, 2000, 1407, 2035, 1125, 1012, 1563, 2069, 3123, 2454, 2001, 1833, 1588, 1390, 2081, 1226, 1087, 1078, 1455, 2825, 2334, 1902, 1838, 1678, 831, 610, 1250, 1996, 1121, 959, 1082, 1306, 1533, 2013, 2916, 2227, 1905, 1740, 1630, 837, 763, 992, 1164, 1441, 1448, 1575, 1690, 1886, 1985, 1909, 1851, 1683, 1330, 1089, 608, 821, 1579, 2242, 2307, 2267, 2207, 1729, 641, 2194, 1131, 828, 1139, 1497, 2060, 3245, 2656, 2252, 1247, 721, 1427, 2234, 893, 1184, 1103, 1234, 1592, 2022, 2154, 1150, 1937, 1187, 1134, 2166, 3251, 2650, 2224, 2074, 1732, 1158, 844, 2281, 1277, 936, 1151, 1550, 2047, 3119, 2534, 2164, 2070, 1343, 963, 2149, 1219, 1036, 1076, 1093, 1488, 2123, 3088, 2505, 2163, 2066, 1991, 989, 898, 1005, 1334, 1396, 1535, 1707, 2025, 2246, 2337, 2238, 1969, 1490, 1248, 902, 673, 977, 1393, 1399, 1834, 2131, 2349, 2514, 2460, 2173, 1741, 1274, 1505, 2287, 1243, 1008, 1152, 1249, 1671, 2190, 3380, 2788, 2508, 2377, 1354, 927, 2322, 2115, 3227, 2615, 2346, 2237, 1646, 1444, 1674, 2104, 2162, 1624, 978, 2317, 1342, 914, 1116, 1442, 2002, 3221, 2649, 2278, 2161, 1939, 769, 1544, 2348, 1314, 1416, 1668, 2314, 3309, 2797, 2476, 1672, 732, 1102, 1583, 1744, 2297, 1934, 1752, 2182, 2333, 2431, 2367, 2300, 2026, 1634, 1191, 1629, 2375, 1307, 1107, 1204, 1240, 1220, 1475, 873, 1647, 740, 2495, 1317, 2270, 3404, 2873, 2579, 2309, 1657, 1088, 657, 1269, 1747, 2088, 2288, 2474, 2664, 2276, 1394, 735, 945, 1056, 2962, 1856, 1557, 1807, 717, 1467, 2328, 1170, 1193, 1461, 2891, 2984, 2441, 2155, 1217, 892, 1144, 1166, 1525, 1704, 1783, 1861, 2383, 2451, 2475, 2497, 2435, 1995, 1615, 755, 953, 1422, 1709, 2235, 2330, 2481, 2429, 1819, 917, 547, 2357, 915, 2040, 746, 2515, 369, 1616, 2430, 1014, 1230, 1363, 1700, 3556, 2809, 2525, 2378, 2096, 576, 2440, 1252, 1600, 2289, 3384, 2741, 2519, 539, 2370, 1147, 1276, 1473, 2176, 3418, 2811, 2556, 2436, 2179, 1137, 602, 1529, 2283, 1203, 1466, 2146, 3365, 2732, 2493, 2251, 2103, 1322, 622, 1064, 1445, 1589, 2101, 2256, 2262, 2175, 1932, 1402, 1254, 734, 1042, 1062, 1471, 1754, 2290, 2387, 2153, 1801, 1329, 1620, 2331, 1293, 968, 2008, 3238, 2779, 2456, 2372, 2046, 1437, 1618, 3172, 2487, 2274, 2200, 1959, 980, 1040, 2028, 1195, 1175, 1554, 2099, 3113, 2602, 2339, 2225, 1552, 1070, 859, 825, 858, 1291, 861, 1308, 2135, 1001, 2965, 2598, 2398, 2264, 1948, 2215, 3080, 2637, 2415, 2091, 1432, 846, 1836, 827, 1011, 2594, 2122, 2063, 1941, 1449, 2273, 1318, 998, 2282, 3196, 2557, 2223, 2183, 1917, 760, 1009, 1050, 1328, 1430, 1764, 2352, 2232, 1921, 1208, 684, 1053, 1237, 1693, 2266, 2351, 2272, 900, 2017, 909, 1352, 634, 964, 991, 1923, 2931, 2048, 1936, 1870, 593, 1279, 1811, 1915, 3016, 2313, 1006, 1321, 2114, 836, 887, 1782, 2884, 2320, 1924, 1879, 1439, 910, 1797, 2011, 1682, 1143, 868, 632, 613, 1847, 2058, 1607, 1113, 691, 2636, 2368, 2362, 1955, 1591, 2770, 2326, 2174, 1340, 722, 1596, 2202, 2188, 1980, 1993, 687, 1017, 2640, 2245, 773, 1896, 791, 1468, 2419, 2084, 1888, 1869, 1426, 1132, 720, 729, 1423, 1655, 1731, 1688, 1666, 1889, 1310, 2112, 2051, 1994, 1697, 1157, 874, 649, 1297, 1968, 1899, 1773, 1893, 995, 749, 1412, 2416, 2039, 1767, 1289, 1823, 966, 1790, 1868, 1763, 639, 1565, 1547, 1507, 875, 656, 654, 863, 1211, 511, 519, 476, 1486, 1638, 645, 2347, 2016, 1947, 2092, 1772, 1613, 853, 1553, 1500, 1367, 549, 1605, 1480, 1558, 1387, 1377, 1337, 1411, 1524, 1465, 1286, 1956, 1548, 1537, 1695, 1826, 1136, 1983, 1822, 1628, 1850, 1698, 1654, 1494, 903, 1728, 1903, 1022, 830, 704, 1225, 1127, 1065, 2036, 1086, 681, 1708, 627, 2305, 1972, 1705, 1684, 1587, 1034, 474, 1301, 1350, 1660, 876, 1384, 2286, 2127, 1943, 1109, 1271, 904, 2353, 2130, 1787, 857, 1196, 1398, 1806, 1681, 1395, 1928, 2186, 2029, 1821, 1546, 2628, 1971, 1530, 788, 2830, 2364, 2169, 2057, 1828, 1990, 2528, 2087, 1808, 924, 551, 1162, 1300, 886, 1261, 1516, 2080, 1357, 1560, 1762, 1841, 1887, 1685, 1582, 1686, 2836, 1931, 1303, 1845, 1892, 1110, 1523, 940, 1853, 2118, 1287, 434, 1429, 3166, 2491, 2259, 2212, 1233, 748, 493, 1487, 2312, 3160, 2468, 2177, 2024, 743, 2260, 896, 1577, 3154, 2365, 1179, 1792, 2255, 1978, 1675, 2201, 2033, 1930, 1463, 1057, 2147, 3298, 2518, 2240, 2090, 2369, 1527, 2171, 3222, 2455, 2072, 2018, 2391, 2129, 3256, 2443, 2012, 1824, 1309, 2021, 3146, 2003, 775, 2253, 1199, 1347, 2826, 1259, 1474, 1077, 1566, 1710, 1207, 2056, 3277, 2489, 1786, 809, 1904, 1720, 1540, 1532, 1840, 2045, 1743, 1604, 439, 1366, 1492, 885, 958, 750, 408, 667, 1522, 1608, 1418, 2170, 1653, 1364, 1189, 1305, 2189, 2422, 2098, 2254, 2432, 2397, 1835, 1781, 856, 1138, 1799, 2857, 1777, 685, 1849, 2400, 1594, 1236, 1601, 1761, 1567, 1459, 538, 753, 1987, 1519, 1385, 840, 2005, 2787, 2150, 1788, 1775, 1723, 1255, 541, 1614, 2618, 1804, 728, 1652, 1916, 811, 2097, 2635, 1911, 2716, 1867, 1568, 950, 2445, 1122, 2499, 1528, 1302, 2113, 1190, 2631, 1769, 1512, 1331, 1018, 1585, 1649, 1760, 1813, 1949, 679, 1417, 1642, 1883, 1464, 1244, 2111, 1104, 817, 2613, 1860, 1026, 1380, 1257, 2108, 1126, 2612, 1827, 884, 1961, 2632, 1316, 1228, 838, 1907, 1561, 1906, 1424, 1335, 1975, 1379, 1699, 888, 889, 1472, 1910, 1420, 2159, 1692, 894, 457, 793, 1304, 1818, 955, 1622, 1101, 1679, 800, 548, 1538, 804, 595
                                                                                  hour
1 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               temperature
1 -5.2, -5.5, -6, -6.2, -6.4, -6.6, -7.4, -7.6, -6.5, -3.5, -0.5, 1.7, 2.4, 3, 2.1, 1.2, 0.8, 0.6, 0, -0.3, -0.8, -0.9, -1.3, -1.8, -2.2, -2.9, -3.8, -4, -4.3, -4.4, -4.2, -0.4, 1.9, 4.3, 6, 7.3, 7.6, 6.4, 5.5, 5, 4.6, 4.1, 3.5, 4, 3.9, 3.3, 3.4, 3.1, 3.2, 4.4, 5.1, 5.8, 6.8, 8, 6.7, 5.7, 5.2, 4.7, 4.2, 3.6, 2.8, 2, 0.2, -1.5, -1.1, 0.1, -0.1, -0.2, -2.1, -3.6, -4.6, -5.3, -5.8, -6.1, -6.8, -6.9, -7.2, -7.5, -8.1, -3.9, -2.3, -1.6, -0.7, -2.6, -3.2, -3.7, -2.8, -2.5, -3, -3.4, -3.3, 1.6, 5.3, 1.1, 1.3, 1.4, 1.5, 1, 0.3, 2.3, 3.7, 0.7, -1.4, -2.7, -4.8, -7, -6.7, -2, -1.7, -2.4, -3.1, -4.1, -4.7, -5.1, -5.4, 2.5, 0.4, 0.5, 0.9, 5.4, -1, -5.6, -5.9, -7.1, -7.9, -8.6, -9.3, -9.7, -10.2, -10.7, -11, -11.2, -11.5, -11.6, -11.8, -12.1, -12.3, -10.5, -9.4, -8.3, -7.7, -8.2, -8.4, -8.8, -9, -9.5, -10.4, -10.9, -11.4, -11.9, -11.7, -11.1, -4.9, -4.5, -8.9, -9.2, -9.8, -10.6, -10.8, -5.7, -6.3, -5, -7.3, -8, -8.7, -9.9, -8.5, 1.8, -7.8, -1.9, 2.9, -0.6, 4.5, 5.9, 6.5, 4.9, 6.1, 5.6, 7, 7.7, 8.6, 8.2, 6.6, 4.8, 2.2, -1.2, -9.1, -10.1, 2.7, 3.8, 2.6, -10.3, -12, -12.6, -12.4, -12.9, -13.2, -13.6, -13.7, -13.8, -14.1, -14.3, -14.6, -14.9, -15.1, -13, -9.6, 6.2, 7.1, 7.4, 7.5, 6.3, 8.1, 8.5, 8.3, 7.2, -12.5, -13.3, -11.3, -13.9, -15, -15.2, -15.4, -15.6, -15.7, -15.9, -16.2, -15.8, -14.5, -13.1, -12.2, -14.7, -16.1, -16, -16.4, -15.3, -12.8, -12.7, -13.5, -16.9, -17.4, -17.5, -17.8, -16.5, -14.4, -10, 6.9, 7.8, 8.7, 7.9, 9.9, 10.3, 9.5, 10.7, 12.2, 14.4, 16, 15.8, 15, 13.9, 12.7, 11.1, 10.2, 9.4, 8.8, 8.4, 9.8, 10.1, 10.8, 11.2, 11.7, 11.8, 11.5, 11.3, 10.6, 9.6, 10, 11, 9.3, 9.2, 10.4, 8.9, 11.6, 11.9, 13.6, 14.9, 15.3, 14.5, 13.7, 10.9, 12.6, 15.5, 17.1, 18.3, 18.6, 17.6, 16.9, 15.7, 14.1, 13.5, 13.4, 13.8, 14, 14.2, 14.6, 17.5, 19.9, 20.9, 21.1, 21.7, 20.5, 19.2, 17.9, 17.2, 16.8, 16.2, 16.1, 16.3, 16.5, 15.1, 14.3, 13.3, 12.1, 10.5, 13.2, 12, 12.3, 9.1, 9, 11.4, 12.4, 9.7, 16.7, 17.4, 17.7, 12.9, 19.4, 19.5, 18.4, 14.7, 15.6, 18.2, 17, 15.2, 13, 12.8, 20.2, 20.8, 20.7, 20.3, 19.1, 17.8, 21, 21.8, 19.3, 20.1, 18.9, 18, 17.3, 16.6, 12.5, 18.5, 21.9, 23, 23.7, 22, 19, 19.6, 19.7, 14.8, 21.2, 21.4, 20.6, 16.4, 18.1, 18.8, 15.9, 18.7, 13.1, 19.8, 22.5, 24.2, 25.9, 26.1, 25.7, 25.6, 24.7, 22.9, 23.1, 24.3, 24.6, 25, 24.8, 23.2, 22.2, 15.4, 22.1, 22.8, 21.6, 22.7, 21.3, 20.4, 23.3, 24, 24.1, 20, 22.6, 23.6, 23.8, 24.5, 25.5, 25.1, 23.5, 21.5, 22.4, 24.4, 26.3, 27.8, 28.5, 29.1, 28.8, 27.5, 26.9, 23.9, 22.3, 23.4, 26, 26.2, 28.3, 29.4, 29, 27.9, 27, 24.9, 27.7, 28.7, 28.4, 28.1, 27.3, 27.2, 26.4, 25.2, 25.3, 26.8, 28.2, 29.6, 29.9, 29.2, 29.8, 28.9, 27.4, 25.4, 26.7, 30.7, 30.4, 29.5, 29.3, 26.5, 28.6, 27.1, 25.8, 27.6, 26.6, 30.1, 28, 30.5, 30.6, 31.6, 31.9, 30.8, 31.8, 31.3, 30.9, 31.2, 32.3, 32.7, 32.2, 31.5, 31, 32, 32.4, 30, 31.1, 30.2, 31.7, 31.4, 32.9, 32.8, 33, 33.7, 33.4, 33.3, 32.1, 33.1, 32.6, 34, 34.1, 34.3, 33.9, 34.2, 35.2, 36.3, 36.5, 36.8, 35, 33.8, 35.5, 36.7, 37.4, 37.5, 37.8, 37.6, 34.5, 29.7, 35.4, 34.8, 30.3, 36.4, 35.8, 34.9, 33.2, 33.5, 35.3, 34.7, 33.6, 34.4, 35.9, 36, 32.5, 36.1, 37, 38, 36.2, 37.9, 38.7, 39.3, 39.4, 39, 36.6, 37.3, 35.7, 34.6, 35.6, 35.1, 37.2, 36.9
                                                                                                                                                                                                                                                                                                                                                               humidity
1 37, 38, 39, 40, 36, 35, 27, 24, 21, 23, 25, 26, 54, 58, 66, 77, 79, 81, 83, 84, 87, 86, 82, 68, 57, 49, 41, 48, 51, 53, 52, 55, 56, 69, 71, 73, 75, 91, 92, 89, 85, 76, 90, 88, 47, 30, 29, 32, 43, 45, 44, 42, 34, 33, 31, 28, 46, 59, 78, 70, 64, 60, 94, 93, 96, 65, 50, 74, 63, 61, 72, 62, 22, 67, 80, 95, 15, 20, 17, 18, 16, 19, 14, 97, 98, 10, 13, 12, 11, 0
                                                                                                                                                                                                                                                                                                             wind_speed
1 2.2, 0.8, 1, 0.9, 2.3, 1.5, 1.3, 1.1, 0.5, 1.2, 1.4, 1.6, 2, 3.2, 4.2, 1.7, 0.6, 2.1, 2.5, 1.8, 2.6, 1.9, 2.7, 3.7, 3.4, 3.5, 4.5, 4.1, 4.8, 5.4, 5.8, 4.7, 5.3, 3.9, 3, 2.4, 2.8, 0, 3.1, 2.9, 0.7, 0.4, 3.3, 0.3, 4.3, 4, 3.8, 3.6, 5.1, 4.6, 0.1, 5, 4.4, 4.9, 0.2, 6.7, 6, 5.2, 5.6, 7.4, 7.2, 6.1, 7.3, 6.9, 5.7
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          visibility
1 2000, 1928, 1996, 1936, 793, 1913, 1687, 1380, 1265, 994, 990, 1256, 1221, 1167, 1202, 1178, 1276, 1436, 1487, 1309, 1406, 1666, 1780, 1955, 1953, 1945, 1891, 1697, 1585, 1448, 1446, 1352, 1296, 485, 830, 1011, 1060, 914, 278, 129, 244, 231, 257, 321, 349, 390, 422, 433, 399, 358, 327, 309, 253, 247, 201, 194, 216, 221, 207, 206, 130, 371, 702, 954, 1888, 1799, 1823, 1938, 1974, 1967, 1959, 1962, 1210, 331, 293, 1862, 1808, 1982, 1934, 1864, 1741, 1518, 1324, 1224, 1261, 1469, 1966, 1968, 1565, 66, 180, 228, 235, 233, 209, 240, 227, 168, 218, 119, 175, 148, 173, 265, 311, 628, 833, 1767, 1975, 1817, 1434, 1558, 1269, 1620, 1844, 1887, 1893, 1902, 1918, 1978, 1941, 1853, 1776, 1559, 1492, 1516, 1595, 1728, 1963, 1906, 1977, 1983, 1992, 1999, 1950, 1940, 1784, 1646, 1500, 1809, 1702, 1948, 1878, 1848, 1654, 1655, 1570, 1629, 1747, 1726, 1748, 1816, 178, 91, 121, 378, 305, 143, 137, 245, 230, 325, 715, 622, 1061, 1954, 1979, 1994, 1973, 1986, 1995, 1951, 1929, 1914, 1956, 1855, 1815, 1930, 1997, 1949, 1907, 1923, 1998, 1981, 1875, 1806, 1883, 1903, 1651, 1718, 1648, 1541, 1387, 1432, 1680, 1555, 1587, 1768, 1827, 1857, 1667, 1723, 1414, 1216, 1397, 1351, 1369, 1290, 1262, 1148, 1089, 1111, 1058, 989, 906, 865, 791, 691, 648, 809, 895, 868, 826, 946, 1016, 1485, 1550, 1113, 1283, 870, 792, 787, 582, 567, 651, 662, 765, 977, 1112, 1724, 1991, 1980, 1926, 1989, 1933, 1990, 1664, 767, 270, 923, 271, 186, 508, 59, 541, 243, 351, 333, 364, 421, 410, 317, 277, 1122, 1172, 831, 537, 551, 881, 979, 1315, 1286, 1209, 1169, 1367, 1594, 1810, 1742, 1778, 1970, 1971, 1993, 1593, 1642, 1557, 1566, 1737, 1738, 1749, 1751, 1772, 1777, 1793, 1852, 1722, 299, 751, 700, 904, 929, 259, 263, 348, 288, 241, 266, 463, 608, 519, 1835, 1349, 953, 1193, 1140, 1065, 821, 794, 784, 736, 789, 760, 880, 919, 897, 804, 836, 820, 779, 801, 732, 677, 763, 806, 832, 788, 706, 641, 583, 506, 425, 375, 334, 297, 226, 215, 192, 246, 249, 269, 281, 264, 229, 219, 222, 212, 200, 185, 196, 197, 190, 189, 159, 100, 95, 90, 87, 156, 404, 744, 561, 380, 605, 699, 695, 477, 565, 884, 1010, 1429, 1825, 1947, 1937, 1984, 1874, 1880, 1833, 1911, 1919, 1895, 1877, 1863, 1868, 1686, 1598, 1132, 1179, 1204, 1159, 1129, 1103, 1040, 986, 968, 1003, 925, 731, 712, 687, 673, 658, 624, 591, 562, 517, 472, 435, 418, 408, 396, 384, 389, 332, 237, 242, 258, 248, 256, 272, 274, 250, 96, 88, 109, 94, 73, 63, 79, 110, 172, 329, 367, 354, 609, 1388, 1578, 1358, 1786, 1766, 1921, 1715, 1871, 1927, 1882, 1732, 1560, 1626, 1302, 1384, 1409, 1249, 1168, 1355, 1633, 1761, 1858, 1752, 1736, 1706, 1910, 1976, 1969, 1987, 1872, 1671, 1813, 1846, 1719, 1591, 1604, 1616, 1689, 1536, 1611, 1481, 1453, 1266, 1452, 1346, 1300, 1319, 1407, 1066, 1709, 1391, 1353, 1284, 1247, 1219, 1285, 1260, 1231, 1175, 1320, 1503, 1946, 1812, 1672, 1693, 1811, 1797, 1663, 1495, 1574, 1535, 1505, 1377, 1350, 1368, 1411, 1371, 1455, 1394, 1603, 1381, 1515, 1419, 1386, 1378, 1305, 1422, 1271, 1333, 1275, 1253, 1268, 1357, 1339, 1070, 971, 1062, 1281, 1267, 1293, 1957, 638, 290, 407, 692, 740, 936, 983, 1420, 1451, 1821, 1785, 1547, 1746, 1707, 1922, 1458, 743, 503, 690, 152, 1925, 1896, 1637, 1576, 1759, 1830, 1901, 1988, 1900, 1899, 1610, 1781, 1638, 1700, 1745, 1807, 1985, 1972, 1960, 1944, 1920, 1964, 887, 571, 670, 330, 1354, 1244, 1087, 957, 876, 761, 684, 633, 596, 522, 420, 414, 438, 444, 471, 453, 442, 411, 412, 432, 489, 550, 568, 592, 824, 982, 1102, 1100, 829, 842, 835, 959, 928, 808, 357, 470, 560, 533, 549, 534, 646, 817, 813, 647, 538, 474, 460, 443, 387, 455, 385, 502, 505, 436, 402, 392, 363, 382, 468, 498, 547, 462, 427, 383, 434, 430, 379, 339, 310, 322, 289, 296, 306, 401, 313, 400, 342, 446, 361, 291, 273, 232, 211, 210, 255, 301, 719, 883, 858, 1259, 1171, 1184, 1084, 1046, 1154, 1250, 1295, 1316, 1241, 1301, 1359, 1519, 1592, 1794, 1370, 1552, 1544, 1433, 1273, 1226, 862, 1080, 1145, 1090, 1005, 978, 623, 355, 276, 187, 346, 340, 984, 1037, 1227, 1091, 1493, 1085, 1890, 1898, 1796, 1383, 655, 140, 81, 590, 492, 554, 894, 1935, 1703, 1889, 1879, 1805, 1869, 1905, 1867, 1401, 1497, 1763, 1730, 1739, 1839, 1804, 1760, 1627, 1573, 1943, 1756, 1866, 1624, 1705, 1912, 1437, 174, 202, 167, 1006, 1093, 1141, 1097, 877, 1215, 915, 916, 1841, 1915, 1917, 1908, 1425, 1909, 1187, 1317, 1662, 1499, 1733, 1523, 1366, 1078, 184, 1521, 1942, 1961, 1790, 1507, 1415, 1561, 1713, 1939, 1894, 1876, 1803, 1904, 1860, 1837, 1885, 1873, 1665, 1580, 1829, 1965, 1856, 1850, 1750, 1754, 1678, 1684, 1508, 1482, 1551, 1755, 1788, 1596, 1462, 1460, 1343, 1196, 1242, 1258, 1279, 1192, 1120, 1009, 1183, 1582, 1327, 1024, 786, 759, 689, 584, 514, 484, 448, 393, 260, 294, 967, 1824, 1239, 1931, 1854, 1506, 1534, 1483, 1313, 773, 675, 1013, 1440, 1417, 1473, 1734, 1577, 1716, 1782, 1932, 1336, 1695, 1814, 1832, 1870, 1820, 1800, 1230, 1131, 991, 1117, 1073, 938, 728, 661, 604, 525, 465, 394, 368, 381, 527, 610, 709, 1826, 1373, 1108, 1138, 1121, 1059, 1004, 975, 1150, 54, 118, 179, 199, 236, 352, 374, 369, 316, 292, 217, 214, 497, 1007, 1843, 1477, 1731, 1791, 1744, 1442, 1597, 1564, 1652, 1710, 1645, 1795, 1683, 1631, 1575, 1134, 1308, 1233, 973, 1398, 1101, 1110, 1095, 1107, 1079, 1128, 1026, 985, 866, 818, 815, 931, 943, 750, 733, 727, 614, 557, 516, 488, 437, 458, 478, 518, 600, 312, 479, 654, 845, 838, 1479, 1207, 745, 859, 580, 469, 636, 362, 303, 320, 1246, 615, 1022, 1035, 1681, 1430, 1567, 1480, 1375, 1325, 1277, 1272, 1334, 1372, 1621, 1600, 1583, 1608, 1640, 1556, 1545, 1721, 1599, 1463, 1543, 1502, 1513, 1563, 1657, 1828, 559, 282, 238, 224, 122, 335, 616, 753, 1475, 1614, 606, 721, 1456, 1484, 1461, 1338, 918, 717, 553, 682, 974, 903, 578, 386, 681, 1758, 543, 529, 494, 473, 413, 415, 417, 403, 544, 1055, 1617, 1526, 1690, 1052, 705, 1125, 1177, 1071, 970, 685, 620, 535, 466, 539, 909, 1635, 1314, 1173, 950, 718, 234, 885, 1647, 1424, 1765, 1520, 1842, 1476, 1119, 1363, 1208, 920, 1094, 1229, 1200, 892, 391, 464, 528, 722, 493, 570, 545, 711, 714, 988, 1303, 1509, 1735, 1562, 1240, 933, 958, 1182, 1692, 1892, 1775, 1859, 1659, 487, 771, 467, 177, 117, 116, 372, 499, 1783, 1677, 1696, 1307, 1142, 1041, 961, 1019, 1043, 1067, 1115, 1008, 937, 861, 849, 710, 879, 1263, 796, 513, 501, 416, 338, 515, 1504, 1958, 1834, 102, 1474, 1802, 952, 782, 822, 927, 900, 1321, 1472, 1641, 1606, 1057, 899, 546, 536, 618, 637, 799, 940, 811, 948, 774, 650, 746, 669, 659, 587, 588, 359, 203, 193, 155, 171, 198, 261, 315, 366, 481, 153, 89, 72, 53, 38, 80, 147, 459, 520, 1075, 1047, 693, 426, 398, 395, 439, 475, 586, 642, 676, 613, 452, 326, 356, 284, 341, 723, 644, 603, 370, 552, 555, 594, 576, 741, 635, 942, 758, 686, 581, 639, 911, 483, 972, 1708, 1822, 1704, 1464, 1191, 1162, 778, 657, 1081, 521, 540, 593, 816, 1098, 1017, 1054, 1189, 1257, 1554, 1769, 1836, 1729, 1201, 1050, 853, 827, 934, 945, 1248, 625, 480, 716, 694, 1347, 1426, 1395, 1294, 1199, 1298, 1034, 1306, 1348, 1326, 409, 163, 141, 511, 572, 1127, 697, 298, 660, 749, 683, 337, 798, 1136, 1217, 461, 645, 707, 1126, 737, 1053, 1392, 1297, 1668, 1661, 1465, 283, 621, 785, 345, 77, 668, 1235, 1441, 1537, 1743, 1514, 1356, 1393, 1428, 1490, 1546, 1454, 1527, 1757, 1861, 1634, 1147, 886, 447, 1468, 1701, 1444, 1818, 607, 802, 597, 1211, 1376, 1342, 1158, 951, 769, 656, 1218, 1264, 1374, 1457, 1590, 1774, 1773, 1459, 1628, 1605, 1501, 1529, 1770, 1609, 1335, 1299, 1762, 1819, 1439, 1164, 1236, 1185, 1021, 1361, 1512, 1161, 1088, 1028, 932, 851, 738, 671, 807, 756, 611, 457, 431, 512, 1639, 1840, 965, 490, 373, 419, 304, 350, 531, 869, 523, 1467, 1470, 1542, 1404, 1137, 956, 962, 1048, 1092, 1517, 1471, 1255, 1163, 944, 1124, 1223, 734, 1884, 1533, 1304, 1412, 1023, 1114, 913, 495, 424, 451, 564, 679, 377, 323, 275, 556, 589, 300, 166, 1400, 1510, 1694, 1653, 1685, 1952, 1789, 1586, 1787, 1924, 1328, 768, 268, 208, 225, 1831, 1916, 1897, 1478, 1838, 1698, 1318, 1015, 790, 287, 314, 423, 688, 542, 730, 867, 343, 181, 135, 27, 105, 251, 834, 1489, 941, 857, 1099, 307, 191, 252, 428, 353, 666, 598, 440, 239, 254, 1133, 1602, 1063, 908, 742, 795, 569, 176, 160, 164, 158, 113, 125, 388, 726, 223, 1312, 1691, 1399, 1630, 663, 1740, 1538, 1530, 1531, 1779, 844, 780, 704, 995, 1658, 1362, 947, 902, 1104, 1025, 882, 889, 1341, 1130, 1548, 1619, 1588, 1329, 1881, 1712, 1498, 1364, 1012, 980, 949, 1030, 981, 360, 405, 476, 1270, 1282, 1447, 708, 653, 896, 1340, 1717, 828, 1675, 1435, 1076, 1188, 1568, 1274, 1027, 1670, 1181, 905, 703, 1144, 797, 500, 1379, 770, 874, 619, 1072, 1205, 1222, 1146, 856, 510, 1438, 1402, 1152, 1245, 1086, 912, 930, 627, 1851, 1656, 1180, 766, 530, 1225, 1069, 1056, 963, 752, 846, 649, 1382, 1528, 848, 1039, 840, 1074, 1714, 1214, 800, 1330, 563, 595, 566, 976, 575, 1622, 1042, 814, 1792, 1849, 1649, 1337, 1232, 1083, 1018, 482, 1427, 890, 960, 901, 1220, 1243, 964, 1001, 805, 376, 103, 441, 698, 182, 157, 188, 992, 850, 720, 667, 1581, 1418, 1431, 617, 987, 1014, 295, 1237, 1153, 1522, 324, 509, 680, 1801, 825, 601, 1118, 1038, 585, 1365, 878, 924, 445, 308, 632, 183, 1408, 450, 1725, 1525, 1727, 872, 852, 1643, 1170, 1289, 1254, 1612, 1674, 1345, 1332, 1491, 1650, 1496, 1569, 1682, 841, 969, 1252, 1194, 713, 1143, 776, 888, 678, 875, 1601, 1174, 1157, 1466, 1203, 847, 1020, 1636, 1886, 1029, 1511, 1549, 1323, 1331, 1553, 1360, 1165, 1049, 783, 725, 1082, 1310, 754, 748, 966, 1000, 1449, 1771, 1077, 1625, 1673, 1105, 532, 1540, 1618, 777, 1123, 1228, 1287, 917, 1584, 1450, 1847, 1064, 626, 602, 1149, 70, 1206, 860, 1045, 1068, 1579, 1116, 1198, 336, 1798, 757, 1669, 1410, 935, 285, 1234, 1109, 1711, 1488, 1421, 1251, 1679, 1195, 213, 1615, 1720, 1002, 921, 729, 665, 907, 891, 486, 1613, 1278, 839, 855, 955, 898, 1151, 1036, 772, 854, 1288, 1423, 1033, 1292, 1416, 922, 328, 286, 145, 124, 279, 507, 739, 302, 910, 406, 526, 456, 781, 365, 573, 1032, 1311, 1322, 762, 764, 701, 1676, 1486, 33, 34, 1589, 674, 319, 220, 524, 1688
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     dew_point_temp
1 -17.6, -17.7, -18.6, -18.7, -19.5, -19.3, -19.8, -22.4, -21.2, -20.2, -17.2, -15.6, -14.6, -11.4, -7, -6.5, -5, -3.5, -3.6, -3.4, -4.2, -4.9, -6.2, -6.9, -7.1, -7.3, -7.9, -7.8, -7.7, -4.8, -3.8, -3.3, -4, -4.6, -4.1, -1.2, 0, -1.3, -0.8, -0.1, 1.2, 1.7, 2, 2.1, 2.7, 3.1, 3.4, 3.7, 3.6, 3.8, 3.3, 3.2, 2.6, 2.4, 2.3, 1.3, 1.1, -0.5, -2.5, -5.7, -11.3, -13, -12.1, -12.9, -15.5, -16.7, -17.8, -18.8, -18.3, -17.3, -15.8, -15.3, -16.1, -16.9, -18.5, -20.4, -20.9, -20.6, -21, -20.5, -21.8, -22, -19.7, -18.2, -16, -15.1, -14.4, -13.5, -13.4, -13.3, -12, -9.4, -6.1, -6.4, -7.2, -7.6, -7.4, -6.8, -6, -9.1, -10.3, -8.2, -2.9, 0.2, 0.3, 0.1, 0.5, 0.4, -0.7, -1.1, -1.4, -2.8, -2.2, -9.3, -10.1, -9.7, -9.6, -11.2, -12.2, -12.6, -12.4, -13.1, -13.6, -15.4, -17.9, -19.1, -17.1, -16.6, -14.3, -13.2, -13.9, -13.8, -12.8, -14, -10.5, -9.8, -10.6, -11, -8.3, -8, -8.4, -8.1, -8.5, -3.7, -1.9, -1.5, -1.6, -0.2, 1.8, -2.3, -4.7, -8.6, -12.3, -14.5, -16.3, -17.4, -16.8, -18, -19.4, -17.5, -19, -19.9, -19.2, -18.4, -21.1, -20.8, -20.1, -18.1, -21.4, -21.5, -20.3, -19.6, -14.9, -13.7, -14.2, -12.5, -11.1, -9.5, -6.7, -8.9, -10.8, -17, -22.1, -20, -18.9, -22.6, -22.2, -21.9, -21.6, -16.4, -14.8, -8.8, -5.8, -5.5, -4.3, -3.2, -2.7, -1.7, -4.5, -2.6, -5.2, -6.3, -9.9, -12.7, -10.7, -5.6, -3.9, -4.4, -6.6, -7.5, -5.1, -5.4, -2.4, -1, 1, 1.5, 1.6, 1.9, 2.2, 2.5, 3, 4.2, 1.4, 0.9, -11.7, -15.7, -16.5, -15.2, -25.2, -23.7, -23.3, -22.7, -20.7, -21.7, -23, -23.4, -22.3, -24.4, -25.4, -24.8, -21.3, -22.9, -5.9, -3.1, -3, 0.6, -0.3, -2.1, -8.7, -15, -14.7, -16.2, -11.6, -10.9, -10.4, -15.9, -14.1, -10.2, -11.8, -9.2, -0.6, -11.5, -23.6, -23.9, -24.2, -24.6, -25.5, -25, -25.1, -23.1, -22.8, -24.7, -2, -0.4, -0.9, -5.3, -1.8, -23.5, -26.9, -26.6, -26.3, -23.2, -27, -28.3, -28.2, -28.9, -29.1, -29.6, -29.7, -29.5, -29.8, -30.5, -30.6, -29, -27.8, -28, -26.8, -25.3, -27.4, -27.3, -25.8, -25.6, -26, -25.9, -26.5, -27.2, -27.1, -28.7, -29.2, -27.9, -26.7, -26.2, -27.6, -27.7, -28.4, -28.1, -26.1, -24.9, -24, -22.5, -24.1, -23.8, -9, -10, 0.7, 2.8, -11.9, 0.8, 4.9, 6.4, 6.9, 7.5, 7.8, 8, 8.1, 7.9, 8.3, 8.2, 8.4, 8.5, 8.7, 8.8, 7.3, 5.7, 5.1, 4.6, 4.4, 3.5, 4, 5.4, 7, 9.5, 9.8, 10.1, 9.9, 10.2, 10, 8.9, 8.6, 7.4, 7.2, 7.6, 7.1, 9.4, 9.3, 10.6, 10.9, 10.4, 10.3, 10.5, 10.7, 12.7, 13.5, 13.7, 13.8, 13.6, 12.8, 12.2, 11.6, 11.1, 9.7, 7.7, 6.1, 4.1, 3.9, 4.7, 4.5, 5.2, 2.9, 4.3, 5.3, 4.8, 5, 6.7, 6.8, 6.6, 6.2, 6, 5.5, 9.6, 9, 5.8, 5.9, 6.3, 6.5, 11.2, 11, 12.4, 13.2, 12.6, 12.3, 12, 10.8, 11.5, 12.1, 11.9, 11.3, 14, 13.4, 14.3, 14.1, 11.4, 12.9, 5.6, 13.1, 14.4, 15.3, 15.6, 15.5, 15.4, 15.2, 14.8, 15.8, 15.1, 15, 16.1, 16.7, 16.6, 16.5, 16.4, 14.5, 11.8, 11.7, 14.6, 14.7, 14.9, 13.3, 13, 9.2, 12.5, 9.1, 13.9, 15.9, 16.8, 17.5, 17.8, 20.6, 19.8, 20, 21, 21.1, 21.2, 21.6, 21.9, 21.5, 21.3, 21.4, 18.8, 18.3, 18.5, 18.7, 19.3, 19.7, 20.3, 19.9, 22, 20.7, 19.6, 18.4, 17.9, 17.7, 17.4, 17, 16.2, 16, 14.2, 16.9, 18, 17.2, 17.6, 16.3, 15.7, 18.6, 18.9, 17.1, 17.3, 18.1, 18.2, 19, 19.4, 20.4, 20.9, 22.6, 23.1, 23.2, 23, 22.4, 19.1, 19.2, 19.5, 20.2, 20.5, 21.8, 20.8, 20.1, 24.1, 22.5, 23.5, 23.4, 21.7, 22.9, 22.8, 22.7, 22.1, 22.2, 22.3, 23.3, 23.9, 23.8, 24, 24.5, 24.9, 24.7, 24.3, 23.6, 23.7, 24.8, 25.1, 24.6, 24.4, 25.5, 25.3, 25.2, 25, 25.4, 26.8, 26.3, 25.8, 25.9, 26.1, 26.6, 24.2, 26, 25.6, 27.2, 25.7
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             solar_radiation
1 0, 0.01, 0.23, 0.65, 0.94, 1.11, 1.16, 1.01, 0.54, 0.24, 0.08, 0.3, 0.8, 1, 1.09, 1.12, 0.99, 0.74, 0.22, 0.06, 0.02, 0.25, 0.43, 0.6, 0.69, 0.53, 0.2, 0.05, 0.64, 1.17, 0.88, 0.55, 0.18, 0.21, 0.63, 0.93, 1.08, 1.1, 0.96, 0.72, 0.36, 0.1, 0.14, 0.41, 0.98, 1.14, 1.04, 0.84, 0.51, 0.15, 1.22, 0.87, 0.56, 0.61, 0.89, 1.05, 1.13, 1.06, 0.4, 0.03, 0.28, 0.35, 0.62, 1.26, 1.24, 0.92, 0.58, 0.19, 1.23, 0.13, 0.52, 0.48, 0.09, 0.34, 0.42, 0.32, 0.86, 1.07, 0.17, 0.85, 0.47, 0.57, 0.91, 0.71, 0.12, 0.67, 0.77, 0.78, 0.16, 0.66, 0.38, 0.11, 0.04, 0.07, 1.18, 0.9, 0.33, 0.75, 0.59, 0.29, 0.81, 0.83, 0.39, 1.15, 1.03, 0.95, 0.76, 1.02, 0.26, 0.5, 0.27, 0.73, 0.46, 0.31, 1.2, 1.19, 0.45, 0.49, 0.79, 0.44, 0.68, 1.27, 1.25, 1.21, 0.7, 1.28, 1.3, 1.29, 0.82, 1.65, 2.04, 2.25, 2.18, 1.91, 1.42, 1.57, 1.99, 2.22, 2.17, 1.89, 1.4, 1.73, 2.12, 2.29, 2.23, 1.94, 1.44, 1.72, 2.09, 2.3, 2.24, 1.93, 1.56, 1.97, 2.02, 1.87, 1.41, 1.54, 1.9, 2.11, 1.81, 1.37, 1.66, 1.49, 1.75, 2.35, 1.36, 1.43, 2.08, 1.55, 2.28, 2.19, 1.96, 1.34, 1.68, 1.84, 1.45, 1.7, 2.01, 2.2, 1.33, 2.46, 2.39, 1.63, 1.98, 1.77, 1.38, 1.71, 2.03, 2.21, 1.82, 2.14, 2.49, 0.37, 1.39, 2.36, 1.95, 2.5, 2.52, 2.48, 2.43, 2.95, 2.86, 2.54, 1.59, 2.61, 2.83, 2.74, 2.15, 2.56, 2.75, 2.66, 2.33, 1.85, 2.45, 2.55, 2.65, 2.32, 1.74, 1.61, 1.76, 1.64, 2.47, 2.53, 2.06, 2.67, 2.69, 2.34, 1.83, 2.44, 2.6, 1.35, 1.79, 2.38, 2.78, 2.99, 2.91, 2.62, 1.69, 2.26, 2.51, 1.88, 2.59, 1.6, 2.7, 2.82, 2.72, 2.87, 2.71, 2.41, 2.27, 2.42, 1.67, 2.63, 2.8, 2.05, 1.86, 2.1, 2.37, 2.73, 2.4, 2.07, 2.57, 1.53, 2, 3.24, 3.04, 2.79, 2.98, 1.8, 2.93, 3.06, 2.94, 2.77, 3.05, 3.32, 3.16, 2.9, 2.68, 3.07, 3.2, 3.13, 3.1, 3.21, 3.11, 3.03, 3.01, 3.27, 3.17, 2.88, 2.89, 2.92, 1.47, 2.85, 3.19, 3.31, 3.29, 0.97, 3.08, 3.18, 3.12, 2.84, 1.48, 3.25, 3.22, 2.96, 1.78, 3.35, 1.92, 1.5, 3.28, 3.39, 3, 1.52, 3.15, 2.16, 3.34, 3.26, 1.58, 3.14, 3.42, 3.52, 3.49, 2.13, 3.44, 3.41, 3.36, 3.33, 2.76, 2.97, 3.3, 2.58, 3.23, 2.31, 3.38, 3.02, 1.31, 1.62, 1.46, 2.64, 2.81, 3.09, 1.32, 1.51, 3.45
                                                                                                                                                                                                                                                                                    rainfall
1 0, 0.5, 1, 2.5, 0.1, 0.2, 0.3, 0.7, 1.6, 0.4, 1.1, 6.4, 9.5, 3.5, 0.9, 3.3, 1.4, 1.5, 3.7, 4.5, 9, 2, 8, 17, 7, 3, 1.9, 0.8, 4, 6, 5, 5.5, 2.4, 35, 19, 13.5, 10, 12.5, 11.5, 5.4, 10.5, 6.5, 16, 14.5, 4.9, 21.5, 12, 18.5, 7.5, 24, 8.5, 7.3, 1.3, 15.5, 29.5, 21, 13, 1.2, 18, 9.1, 1.8
                                                                                                                                                                                                                                       snowfall
1 0, 0.1, 0.3, 0.4, 0.2, 1, 0.9, 0.8, 0.7, 0.6, 2.7, 4, 4.1, 4.3, 3.9, 3.1, 2.1, 1.4, 0.5, 1.3, 1.8, 2, 4.8, 5.1, 5, 4.2, 3.2, 2.6, 2.5, 2.3, 2.2, 1.9, 1.7, 1.6, 2.4, 1.2, 1.1, 3, 3.3, 3.5, 3.4, 2.8, 1.5, 3.8, 3.7, 7.1, 8.8, 7, 6, 3.6, 2.9
                         seasons             holiday functioning_day
1 Winter, Spring, Summer, Autumn No Holiday, Holiday         Yes, No</code></pre>
</div>
</div>
</section>
<section id="converting-columns-to-appropriate-type" class="level4">
<h4 class="anchored" data-anchor-id="converting-columns-to-appropriate-type">Converting columns to appropriate type</h4>
<p>Converting date to Date type and Season, Holiday and Functioning day to factor. Rest of the columns should be numeric.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> <span class="fu">as.Date</span>(date, <span class="at">format =</span> <span class="st">"%d/%m/%Y"</span>),</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">seasons =</span> <span class="fu">factor</span>(seasons),</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">holiday =</span> <span class="fu">factor</span>(holiday),</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">functioning_day =</span> <span class="fu">factor</span>(functioning_day)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(rented_bike_count, hour, temperature, humidity, wind_speed,</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>                  visibility, dew_point_temp, solar_radiation, </span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>                  rainfall, snowfall), as.numeric))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="split-the-data" class="level2">
<h2 class="anchored" data-anchor-id="split-the-data">Split the Data</h2>
<section id="splitting-into-training-and-test-sets" class="level4">
<h4 class="anchored" data-anchor-id="splitting-into-training-and-test-sets">Splitting into Training and Test Sets</h4>
<p>Using 75/25 split to split data into Training and Testing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>data_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(df, <span class="at">prop =</span> <span class="fl">0.75</span>, <span class="at">strata =</span> seasons)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> <span class="fu">training</span>(data_split)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> <span class="fu">testing</span>(data_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="creating-10-cross-validation-folds-for-training-data-which-will-be-used-for-fitting-and-validation." class="level4">
<h4 class="anchored" data-anchor-id="creating-10-cross-validation-folds-for-training-data-which-will-be-used-for-fitting-and-validation.">Creating 10 cross-validation folds for training data which will be used for fitting and validation.</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>cv_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(train_data, <span class="at">v =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="fitting-mlr-models" class="level2">
<h2 class="anchored" data-anchor-id="fitting-mlr-models">Fitting MLR Models</h2>
<section id="creating-recipe-1" class="level4">
<h4 class="anchored" data-anchor-id="creating-recipe-1">Creating Recipe 1</h4>
<p>Creating day of week variable to get weekday and weekend, converting cat varibles to dummy and normalizing numric variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>recipe1 <span class="ot">&lt;-</span> <span class="fu">recipe</span>(rented_bike_count <span class="sc">~</span> ., <span class="at">data =</span> train_data) <span class="sc">|&gt;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_date</span>(date, <span class="at">features =</span> <span class="fu">c</span>(<span class="st">"dow"</span>), <span class="at">label =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_mutate</span>(</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">day_type =</span> <span class="fu">factor</span>(</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">if_else</span>(date_dow <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">7</span>), <span class="st">"weekend"</span>, <span class="st">"weekday"</span>),</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"weekday"</span>, <span class="st">"weekend"</span>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_rm</span>(date, date_dow) <span class="sc">|&gt;</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_normalize</span>(<span class="fu">all_numeric_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_lincomb</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>prepped_recipe <span class="ot">&lt;-</span> <span class="fu">prep</span>(recipe1, <span class="at">training =</span> train_data)</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>baked_data <span class="ot">&lt;-</span> <span class="fu">bake</span>(prepped_recipe, <span class="at">new_data =</span> <span class="cn">NULL</span>)</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(baked_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6,570
Columns: 16
$ hour                &lt;dbl&gt; -1.65328818, -1.50926857, -1.22122934, -0.93319011…
$ temperature         &lt;dbl&gt; 0.8629573, 0.8211018, 0.7290195, 0.6871640, 0.6871…
$ humidity            &lt;dbl&gt; 1.22149105, 1.22149105, 1.41862915, 1.41862915, 1.…
$ wind_speed          &lt;dbl&gt; -1.178835879, -1.569270387, -1.374053133, -1.08122…
$ visibility          &lt;dbl&gt; 0.7380877, 0.8250737, 0.2325845, -0.5273115, 0.493…
$ dew_point_temp      &lt;dbl&gt; 1.2254462, 1.1871984, 1.1642497, 1.1260019, 1.0418…
$ solar_radiation     &lt;dbl&gt; -0.65622939, -0.65622939, -0.65622939, -0.65622939…
$ rainfall            &lt;dbl&gt; -0.1291446, -0.1291446, -0.1291446, -0.1291446, -0…
$ snowfall            &lt;dbl&gt; -0.1687671, -0.1687671, -0.1687671, -0.1687671, -0…
$ rented_bike_count   &lt;dbl&gt; 1075, 975, 514, 260, 511, 812, 925, 861, 981, 1086…
$ seasons_Spring      &lt;dbl&gt; -0.5804697, -0.5804697, -0.5804697, -0.5804697, -0…
$ seasons_Summer      &lt;dbl&gt; -0.5804697, -0.5804697, -0.5804697, -0.5804697, -0…
$ seasons_Winter      &lt;dbl&gt; -0.572034, -0.572034, -0.572034, -0.572034, -0.572…
$ holiday_No.Holiday  &lt;dbl&gt; 0.2269992, 0.2269992, 0.2269992, 0.2269992, 0.2269…
$ functioning_day_Yes &lt;dbl&gt; 0.1856812, 0.1856812, 0.1856812, 0.1856812, 0.1856…
$ day_type_weekend    &lt;dbl&gt; 1.59238, 1.59238, 1.59238, 1.59238, 1.59238, 1.592…</code></pre>
</div>
</div>
</section>
<section id="creating-recipe-2" class="level4">
<h4 class="anchored" data-anchor-id="creating-recipe-2">Creating Recipe 2</h4>
<p>Adding interatction between mentioned variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>recipe2 <span class="ot">&lt;-</span> <span class="fu">recipe</span>(rented_bike_count <span class="sc">~</span> ., <span class="at">data =</span> train_data) <span class="sc">|&gt;</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_date</span>(date, <span class="at">features =</span> <span class="fu">c</span>(<span class="st">"dow"</span>), <span class="at">label =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_mutate</span>(</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">day_type =</span> <span class="fu">factor</span>(</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">if_else</span>(date_dow <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">7</span>), <span class="st">"weekend"</span>, <span class="st">"weekday"</span>),</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"weekday"</span>, <span class="st">"weekend"</span>)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_rm</span>(date, date_dow) <span class="sc">|&gt;</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_interact</span>(<span class="at">terms =</span> <span class="sc">~</span> <span class="fu">starts_with</span>(<span class="st">"seasons"</span>)<span class="sc">:</span><span class="fu">starts_with</span>(<span class="st">"holiday"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_interact</span>(<span class="at">terms =</span> <span class="sc">~</span> temperature<span class="sc">:</span><span class="fu">starts_with</span>(<span class="st">"seasons"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_interact</span>(<span class="at">terms =</span> <span class="sc">~</span> temperature<span class="sc">:</span>rainfall) <span class="sc">|&gt;</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_normalize</span>(<span class="fu">all_numeric_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_lincomb</span>(<span class="fu">all_predictors</span>())</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>prepped_recipe <span class="ot">&lt;-</span> <span class="fu">prep</span>(recipe2, <span class="at">training =</span> train_data)</span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>baked_data <span class="ot">&lt;-</span> <span class="fu">bake</span>(prepped_recipe, <span class="at">new_data =</span> <span class="cn">NULL</span>)</span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(baked_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6,570
Columns: 26
$ hour                                                  &lt;dbl&gt; -1.65328818, -1.…
$ temperature                                           &lt;dbl&gt; 0.8629573, 0.821…
$ humidity                                              &lt;dbl&gt; 1.22149105, 1.22…
$ wind_speed                                            &lt;dbl&gt; -1.178835879, -1…
$ visibility                                            &lt;dbl&gt; 0.7380877, 0.825…
$ dew_point_temp                                        &lt;dbl&gt; 1.2254462, 1.187…
$ solar_radiation                                       &lt;dbl&gt; -0.65622939, -0.…
$ rainfall                                              &lt;dbl&gt; -0.1291446, -0.1…
$ snowfall                                              &lt;dbl&gt; -0.1687671, -0.1…
$ rented_bike_count                                     &lt;dbl&gt; 1075, 975, 514, …
$ `seasonsSpring_x_holidayNo Holiday`                   &lt;dbl&gt; -0.5675813, -0.5…
$ `seasonsSummer_x_holidayNo Holiday`                   &lt;dbl&gt; -0.5729713, -0.5…
$ `seasonsWinter_x_holidayNo Holiday`                   &lt;dbl&gt; -0.5391864, -0.5…
$ temperature_x_seasonsSpring                           &lt;dbl&gt; -0.50143, -0.501…
$ temperature_x_seasonsSummer                           &lt;dbl&gt; -0.5688983, -0.5…
$ temperature_x_seasonsWinter                           &lt;dbl&gt; 0.2154018, 0.215…
$ `temperature_x_\`seasonsSpring_x_holidayNo Holiday\`` &lt;dbl&gt; -0.4924703, -0.4…
$ `temperature_x_\`seasonsSummer_x_holidayNo Holiday\`` &lt;dbl&gt; -0.5616708, -0.5…
$ `temperature_x_\`seasonsWinter_x_holidayNo Holiday\`` &lt;dbl&gt; 0.2179298, 0.217…
$ temperature_x_rainfall                                &lt;dbl&gt; -0.1118424, -0.1…
$ seasons_Spring                                        &lt;dbl&gt; -0.5804697, -0.5…
$ seasons_Summer                                        &lt;dbl&gt; -0.5804697, -0.5…
$ seasons_Winter                                        &lt;dbl&gt; -0.572034, -0.57…
$ holiday_No.Holiday                                    &lt;dbl&gt; 0.2269992, 0.226…
$ functioning_day_Yes                                   &lt;dbl&gt; 0.1856812, 0.185…
$ day_type_weekend                                      &lt;dbl&gt; 1.59238, 1.59238…</code></pre>
</div>
</div>
</section>
<section id="creating-recipe-3" class="level4">
<h4 class="anchored" data-anchor-id="creating-recipe-3">Creating Recipe 3</h4>
<p>Adding 2nd degree poly term for each numric variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>numeric_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"hour"</span>,</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"temperature"</span>,</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"humidity"</span>,</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"wind_speed"</span>,</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"visibility"</span>,</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"dew_point_temp"</span>,</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"solar_radiation"</span>,</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"rainfall"</span>,</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"snowfall"</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>recipe3 <span class="ot">&lt;-</span> recipe2 <span class="sc">|&gt;</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_poly</span>(<span class="fu">all_of</span>(numeric_vars), <span class="at">degree =</span> <span class="dv">2</span>)</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>prepped_recipe <span class="ot">&lt;-</span> <span class="fu">prep</span>(recipe3, <span class="at">training =</span> train_data)</span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>baked_data <span class="ot">&lt;-</span> <span class="fu">bake</span>(prepped_recipe, <span class="at">new_data =</span> <span class="cn">NULL</span>)</span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(baked_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6,570
Columns: 35
$ rented_bike_count                                     &lt;dbl&gt; 1075, 975, 514, …
$ `seasonsSpring_x_holidayNo Holiday`                   &lt;dbl&gt; -0.5675813, -0.5…
$ `seasonsSummer_x_holidayNo Holiday`                   &lt;dbl&gt; -0.5729713, -0.5…
$ `seasonsWinter_x_holidayNo Holiday`                   &lt;dbl&gt; -0.5391864, -0.5…
$ temperature_x_seasonsSpring                           &lt;dbl&gt; -0.50143, -0.501…
$ temperature_x_seasonsSummer                           &lt;dbl&gt; -0.5688983, -0.5…
$ temperature_x_seasonsWinter                           &lt;dbl&gt; 0.2154018, 0.215…
$ `temperature_x_\`seasonsSpring_x_holidayNo Holiday\`` &lt;dbl&gt; -0.4924703, -0.4…
$ `temperature_x_\`seasonsSummer_x_holidayNo Holiday\`` &lt;dbl&gt; -0.5616708, -0.5…
$ `temperature_x_\`seasonsWinter_x_holidayNo Holiday\`` &lt;dbl&gt; 0.2179298, 0.217…
$ temperature_x_rainfall                                &lt;dbl&gt; -0.1118424, -0.1…
$ seasons_Spring                                        &lt;dbl&gt; -0.5804697, -0.5…
$ seasons_Summer                                        &lt;dbl&gt; -0.5804697, -0.5…
$ seasons_Winter                                        &lt;dbl&gt; -0.572034, -0.57…
$ holiday_No.Holiday                                    &lt;dbl&gt; 0.2269992, 0.226…
$ functioning_day_Yes                                   &lt;dbl&gt; 0.1856812, 0.185…
$ day_type_weekend                                      &lt;dbl&gt; 1.59238, 1.59238…
$ hour_poly_1                                           &lt;dbl&gt; -0.0203985328, -…
$ hour_poly_2                                           &lt;dbl&gt; 0.024076908, 0.0…
$ temperature_poly_1                                    &lt;dbl&gt; 0.010647305, 0.0…
$ temperature_poly_2                                    &lt;dbl&gt; -0.0009157760, -…
$ humidity_poly_1                                       &lt;dbl&gt; 0.0150709511, 0.…
$ humidity_poly_2                                       &lt;dbl&gt; 0.004605676, 0.0…
$ wind_speed_poly_1                                     &lt;dbl&gt; -0.0145446647, -…
$ wind_speed_poly_2                                     &lt;dbl&gt; 0.0127782235, 0.…
$ visibility_poly_1                                     &lt;dbl&gt; 0.009106644, 0.0…
$ visibility_poly_2                                     &lt;dbl&gt; 0.001030459, 0.0…
$ dew_point_temp_poly_1                                 &lt;dbl&gt; 0.015119750, 0.0…
$ dew_point_temp_poly_2                                 &lt;dbl&gt; 0.0111142081, 0.…
$ solar_radiation_poly_1                                &lt;dbl&gt; -0.0080966627, -…
$ solar_radiation_poly_2                                &lt;dbl&gt; 0.0054065083, 0.…
$ rainfall_poly_1                                       &lt;dbl&gt; -0.001593406, -0…
$ rainfall_poly_2                                       &lt;dbl&gt; 0.001341865, 0.0…
$ snowfall_poly_1                                       &lt;dbl&gt; -0.002082275, -0…
$ snowfall_poly_2                                       &lt;dbl&gt; 0.001195732, 0.0…</code></pre>
</div>
</div>
</section>
<section id="setting-up-linear-regression-model" class="level4">
<h4 class="anchored" data-anchor-id="setting-up-linear-regression-model">Setting up Linear regression model</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>lm_model <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">|&gt;</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>workflow1 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">|&gt;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(lm_model) <span class="sc">|&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe1)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>workflow2 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">|&gt;</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(lm_model) <span class="sc">|&gt;</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe2)</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>workflow3 <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">|&gt;</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(lm_model) <span class="sc">|&gt;</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fitting-training-data-on-each-model-of-receipe" class="level4">
<h4 class="anchored" data-anchor-id="fitting-training-data-on-each-model-of-receipe">Fitting training data on each model of receipe</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>results1 <span class="ot">&lt;-</span> <span class="fu">fit_resamples</span>(</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  workflow1,</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamples =</span> cv_folds,</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="fu">metric_set</span>(rmse)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>results2 <span class="ot">&lt;-</span> <span class="fu">fit_resamples</span>(</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>  workflow2,</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamples =</span> cv_folds,</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="fu">metric_set</span>(rmse)</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>results3 <span class="ot">&lt;-</span> <span class="fu">fit_resamples</span>(</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>  workflow3,</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamples =</span> cv_folds,</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="fu">metric_set</span>(rmse)</span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="analyzing-performance-metric-of-each-model" class="level4">
<h4 class="anchored" data-anchor-id="analyzing-performance-metric-of-each-model">Analyzing performance metric of each model</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect_metrics</span>(results1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  .metric .estimator  mean     n std_err .config             
  &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
1 rmse    standard    432.    10    5.66 Preprocessor1_Model1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect_metrics</span>(results2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  .metric .estimator  mean     n std_err .config             
  &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
1 rmse    standard    423.    10    5.46 Preprocessor1_Model1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">collect_metrics</span>(results3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 6
  .metric .estimator  mean     n std_err .config             
  &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;               
1 rmse    standard    396.    10    4.81 Preprocessor1_Model1</code></pre>
</div>
</div>
</section>
<section id="choice-of-final-model" class="level4">
<h4 class="anchored" data-anchor-id="choice-of-final-model">Choice of Final Model</h4>
<p>As per above metric we can see that Third model has less RMSE value and standard error value compared to other two, Hence I will be using third model for fitting whole training set and testing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>final_fit <span class="ot">&lt;-</span> <span class="fu">last_fit</span>(workflow3, <span class="at">split =</span> data_split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>final_fit <span class="sc">|&gt;</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 4
  .metric .estimator .estimate .config             
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;               
1 rmse    standard     389.    Preprocessor1_Model1
2 rsq     standard       0.634 Preprocessor1_Model1</code></pre>
</div>
</div>
<p>As we can see RMSE value we get here is less than CV RMSE of all 3 models. Though R-square value indicates mid-level generalization of data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>final_model <span class="ot">&lt;-</span> <span class="fu">extract_fit_parsnip</span>(final_fit<span class="sc">$</span>.workflow[[<span class="dv">1</span>]])</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(final_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 35 × 5
   term                                     estimate std.error statistic p.value
   &lt;chr&gt;                                       &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
 1 "(Intercept)"                               706.       4.88   145.    0      
 2 "`seasonsSpring_x_holidayNo Holiday`"       -93.5     48.4     -1.93  0.0534 
 3 "`seasonsSummer_x_holidayNo Holiday`"       -44.6    162.      -0.275 0.783  
 4 "`seasonsWinter_x_holidayNo Holiday`"       -41.3     23.1     -1.79  0.0737 
 5 "temperature_x_seasonsSpring"                75.8     41.6      1.82  0.0687 
 6 "temperature_x_seasonsSummer"              -512.     163.      -3.14  0.00171
 7 "temperature_x_seasonsWinter"               -64.0     31.2     -2.05  0.0405 
 8 "`temperature_x_\\`seasonsSpring_x_holi…     28.3     40.9      0.692 0.489  
 9 "`temperature_x_\\`seasonsSummer_x_holi…     22.4    159.       0.140 0.888  
10 "`temperature_x_\\`seasonsWinter_x_holi…    -24.9     29.4     -0.846 0.397  
# ℹ 25 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="model-training" class="level2">
<h2 class="anchored" data-anchor-id="model-training">Model Training</h2>
<section id="lasso-model" class="level3">
<h3 class="anchored" data-anchor-id="lasso-model">LASSO Model</h3>
<p>Tuning Lasso model and using recipe3. Selecting best model based on RMSE metric using CV and then fitting on training data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>lasso_spec <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>(<span class="at">penalty =</span> <span class="fu">tune</span>(), <span class="at">mixture =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"glmnet"</span>)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>lasso_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe3) <span class="sc">%&gt;%</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(lasso_spec)</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>lasso_tune <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>  lasso_workflow,</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamples =</span> cv_folds,</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid =</span> <span class="dv">20</span>,</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="fu">metric_set</span>(rmse, mae)</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>lasso_best <span class="ot">&lt;-</span> <span class="fu">select_best</span>(lasso_tune, <span class="at">metric =</span> <span class="st">"rmse"</span>)</span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>lasso_final <span class="ot">&lt;-</span> <span class="fu">finalize_workflow</span>(lasso_workflow, lasso_best)</span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>lasso_fit <span class="ot">&lt;-</span> <span class="fu">fit</span>(lasso_final, <span class="at">data =</span> train_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="regression-tree" class="level3">
<h3 class="anchored" data-anchor-id="regression-tree">Regression Tree</h3>
<p>Here the I am skipping interact step for recipe as it will introduce multi collinearity in modela dn Regression tree will take time for fitting data. Setting engine ‘rpart’ and choosing RMSE to decide best fit.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>recipe_tree <span class="ot">&lt;-</span> <span class="fu">recipe</span>(rented_bike_count <span class="sc">~</span> ., <span class="at">data =</span> train_data) <span class="sc">|&gt;</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_date</span>(date, <span class="at">features =</span> <span class="fu">c</span>(<span class="st">"dow"</span>), <span class="at">label =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_mutate</span>(</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">day_type =</span> <span class="fu">factor</span>(</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">if_else</span>(date_dow <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">7</span>), <span class="st">"weekend"</span>, <span class="st">"weekday"</span>),</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"weekday"</span>, <span class="st">"weekend"</span>)</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_rm</span>(date, date_dow) <span class="sc">|&gt;</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_dummy</span>(<span class="fu">all_nominal_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_normalize</span>(<span class="fu">all_numeric_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_lincomb</span>(<span class="fu">all_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_poly</span>(<span class="fu">all_of</span>(numeric_vars), <span class="at">degree =</span> <span class="dv">2</span>)</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>tree_spec <span class="ot">&lt;-</span> <span class="fu">decision_tree</span>(<span class="at">cost_complexity =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"rpart"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>tree_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_tree) <span class="sc">%&gt;%</span></span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(tree_spec)</span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>tree_tune <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(</span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a>  tree_workflow,</span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamples =</span> cv_folds,</span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid =</span> <span class="dv">20</span>,</span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="fu">metric_set</span>(rmse, mae)</span>
<span id="cb61-29"><a href="#cb61-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb61-30"><a href="#cb61-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-31"><a href="#cb61-31" aria-hidden="true" tabindex="-1"></a>tree_best <span class="ot">&lt;-</span> <span class="fu">select_best</span>(tree_tune, <span class="at">metric =</span> <span class="st">"rmse"</span>)</span>
<span id="cb61-32"><a href="#cb61-32" aria-hidden="true" tabindex="-1"></a>tree_final <span class="ot">&lt;-</span> <span class="fu">finalize_workflow</span>(tree_workflow, tree_best)</span>
<span id="cb61-33"><a href="#cb61-33" aria-hidden="true" tabindex="-1"></a>tree_fit <span class="ot">&lt;-</span> <span class="fu">fit</span>(tree_final, <span class="at">data =</span> train_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bagged-tree" class="level3">
<h3 class="anchored" data-anchor-id="bagged-tree">Bagged Tree</h3>
<p>I am using same recipe from above and selecting best fit based on RMSE.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>bag_spec <span class="ot">&lt;-</span> <span class="fu">bag_tree</span>(<span class="at">tree_depth =</span> <span class="dv">5</span>, <span class="at">min_n =</span> <span class="dv">10</span>, <span class="at">cost_complexity =</span> <span class="fu">tune</span>()) <span class="sc">|&gt;</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"rpart"</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>bag_wkf <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">|&gt;</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe_tree) <span class="sc">|&gt;</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(bag_spec)</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>bag_fit <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>  bag_wkf,</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamples =</span> cv_folds,</span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid =</span> <span class="fu">grid_regular</span>(<span class="fu">cost_complexity</span>(), <span class="at">levels =</span> <span class="dv">15</span>),</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="fu">metric_set</span>(rmse, mae)</span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a>bag_fit <span class="sc">|&gt;</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect_metrics</span>() <span class="sc">|&gt;</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(.metric <span class="sc">==</span> <span class="st">"rmse"</span>) <span class="sc">|&gt;</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 15 × 7
   cost_complexity .metric .estimator  mean     n std_err .config              
             &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;                
 1        1.93e- 9 rmse    standard    319.    10    4.62 Preprocessor1_Model03
 2        8.48e- 9 rmse    standard    319.    10    5.03 Preprocessor1_Model04
 3        1.39e- 5 rmse    standard    319.    10    4.32 Preprocessor1_Model09
 4        6.11e- 5 rmse    standard    320.    10    4.01 Preprocessor1_Model10
 5        4.39e-10 rmse    standard    320.    10    4.68 Preprocessor1_Model02
 6        1.64e- 7 rmse    standard    320.    10    4.85 Preprocessor1_Model06
 7        2.68e- 4 rmse    standard    321.    10    4.20 Preprocessor1_Model11
 8        3.16e- 6 rmse    standard    322.    10    3.88 Preprocessor1_Model08
 9        7.20e- 7 rmse    standard    322.    10    4.63 Preprocessor1_Model07
10        1.18e- 3 rmse    standard    322.    10    4.69 Preprocessor1_Model12
11        3.73e- 8 rmse    standard    324.    10    4.65 Preprocessor1_Model05
12        1   e-10 rmse    standard    324.    10    4.74 Preprocessor1_Model01
13        5.18e- 3 rmse    standard    331.    10    5.06 Preprocessor1_Model13
14        2.28e- 2 rmse    standard    370.    10    5.07 Preprocessor1_Model14
15        1   e- 1 rmse    standard    487.    10    5.20 Preprocessor1_Model15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>bag_best_params <span class="ot">&lt;-</span> <span class="fu">select_best</span>(bag_fit, <span class="at">metric =</span><span class="st">"rmse"</span>)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>bag_final_wkf <span class="ot">&lt;-</span> bag_wkf <span class="sc">|&gt;</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">finalize_workflow</span>(bag_best_params)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>bagged_fit <span class="ot">&lt;-</span> bag_final_wkf <span class="sc">|&gt;</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(<span class="at">data =</span> train_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="random-forest" class="level3">
<h3 class="anchored" data-anchor-id="random-forest">Random Forest</h3>
<p>I am setting tree param value is 1000 and importance as impurity for visualization. Using recipe1 for easier fir and selecting best fir based on RMSE.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>rf_spec <span class="ot">&lt;-</span> <span class="fu">rand_forest</span>(<span class="at">mtry =</span> <span class="fu">tune</span>(), <span class="at">trees =</span> <span class="dv">1000</span>, <span class="at">min_n =</span> <span class="fu">tune</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"ranger"</span>, <span class="at">importance =</span> <span class="st">"impurity"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"regression"</span>)</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>rf_workflow <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">%&gt;%</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(recipe1) <span class="sc">%&gt;%</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(rf_spec)</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>rf_tune <span class="ot">&lt;-</span> <span class="fu">tune_grid</span>(</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>  rf_workflow,</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">resamples =</span> cv_folds,</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">grid =</span> <span class="dv">20</span>,</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">metrics =</span> <span class="fu">metric_set</span>(rmse, mae)</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>i Creating pre-processing data to finalize unknown parameter: mtry</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>rf_best <span class="ot">&lt;-</span> <span class="fu">select_best</span>(rf_tune, <span class="at">metric =</span><span class="st">"rmse"</span>)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>rf_final <span class="ot">&lt;-</span> <span class="fu">finalize_workflow</span>(rf_workflow, rf_best)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>rf_fit <span class="ot">&lt;-</span> <span class="fu">fit</span>(rf_final, <span class="at">data =</span> train_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="compare-all-models" class="level3">
<h3 class="anchored" data-anchor-id="compare-all-models">Compare all models</h3>
<p>Here I wrote a function which will fit the model on test data and return RMSE and MSE. And using that function I fitted all function and displayed the metrics.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>final_workflow <span class="ot">&lt;-</span> <span class="fu">extract_workflow</span>(final_fit)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>evaluate_model <span class="ot">&lt;-</span> <span class="cf">function</span>(model, test_data) {</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(model, test_data) <span class="sc">%&gt;%</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_cols</span>(test_data) <span class="sc">%&gt;%</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">error =</span> rented_bike_count <span class="sc">-</span> .pred,</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">abs_error =</span> <span class="fu">abs</span>(error)</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>  metrics <span class="ot">&lt;-</span> predictions <span class="sc">%&gt;%</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">rmse =</span> <span class="fu">sqrt</span>(<span class="fu">mean</span>(error<span class="sc">^</span><span class="dv">2</span>)),</span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">mae =</span> <span class="fu">mean</span>(abs_error)</span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(metrics)</span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>metrics_mlr <span class="ot">&lt;-</span> <span class="fu">evaluate_model</span>(final_workflow, test_data)</span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>metrics_lasso <span class="ot">&lt;-</span> <span class="fu">evaluate_model</span>(lasso_fit, test_data)</span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>metrics_tree <span class="ot">&lt;-</span> <span class="fu">evaluate_model</span>(tree_fit, test_data)</span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>metrics_bagged <span class="ot">&lt;-</span> <span class="fu">evaluate_model</span>(bagged_fit, test_data)</span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>metrics_rf <span class="ot">&lt;-</span> <span class="fu">evaluate_model</span>(rf_fit, test_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>all_metrics <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">mlr =</span> metrics_mlr,</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">lasso =</span> metrics_lasso,</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">tree =</span> metrics_tree,</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">bagged =</span> metrics_bagged,</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">rf =</span> metrics_rf,</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">.id =</span> <span class="st">"model"</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(all_metrics)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  model   rmse   mae
  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 mlr     389.  291.
2 lasso   389.  292.
3 tree    264.  153.
4 bagged  330.  221.
5 rf      188.  110.</code></pre>
</div>
</div>
</section>
</section>
<section id="visualization" class="level2">
<h2 class="anchored" data-anchor-id="visualization">Visualization</h2>
<section id="final-coefficient-table" class="level3">
<h3 class="anchored" data-anchor-id="final-coefficient-table">Final Coefficient Table</h3>
<section id="mlr-model" class="level4">
<h4 class="anchored" data-anchor-id="mlr-model">MLR Model</h4>
<p>Below shoes coefficient table for MLR Model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>final_model <span class="ot">&lt;-</span> <span class="fu">extract_fit_parsnip</span>(final_fit<span class="sc">$</span>.workflow[[<span class="dv">1</span>]])</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>mlr_coefs <span class="ot">&lt;-</span> <span class="fu">tidy</span>(final_model)</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mlr_coefs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 35 × 5
   term                                     estimate std.error statistic p.value
   &lt;chr&gt;                                       &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
 1 "(Intercept)"                               706.       4.88   145.    0      
 2 "`seasonsSpring_x_holidayNo Holiday`"       -93.5     48.4     -1.93  0.0534 
 3 "`seasonsSummer_x_holidayNo Holiday`"       -44.6    162.      -0.275 0.783  
 4 "`seasonsWinter_x_holidayNo Holiday`"       -41.3     23.1     -1.79  0.0737 
 5 "temperature_x_seasonsSpring"                75.8     41.6      1.82  0.0687 
 6 "temperature_x_seasonsSummer"              -512.     163.      -3.14  0.00171
 7 "temperature_x_seasonsWinter"               -64.0     31.2     -2.05  0.0405 
 8 "`temperature_x_\\`seasonsSpring_x_holi…     28.3     40.9      0.692 0.489  
 9 "`temperature_x_\\`seasonsSummer_x_holi…     22.4    159.       0.140 0.888  
10 "`temperature_x_\\`seasonsWinter_x_holi…    -24.9     29.4     -0.846 0.397  
# ℹ 25 more rows</code></pre>
</div>
</div>
</section>
<section id="lasso-coefficients." class="level4">
<h4 class="anchored" data-anchor-id="lasso-coefficients.">LASSO Coefficients.</h4>
<p>Below is the coefficient table and plot for LASSO Model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>lasso_coefs <span class="ot">&lt;-</span> <span class="fu">tidy</span>(lasso_fit)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(lasso_coefs, <span class="fu">aes</span>(<span class="at">x =</span> term, <span class="at">y =</span> estimate)) <span class="sc">+</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"LASSO Coefficients"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ST_558_HW9_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lasso_coefs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 35 × 3
   term                                              estimate  penalty
   &lt;chr&gt;                                                &lt;dbl&gt;    &lt;dbl&gt;
 1 (Intercept)                                          706.  2.65e-10
 2 seasonsSpring_x_holidayNo Holiday                    -92.6 2.65e-10
 3 seasonsSummer_x_holidayNo Holiday                     46.2 2.65e-10
 4 seasonsWinter_x_holidayNo Holiday                    -41.9 2.65e-10
 5 temperature_x_seasonsSpring                           75.8 2.65e-10
 6 temperature_x_seasonsSummer                         -398.  2.65e-10
 7 temperature_x_seasonsWinter                          -64.8 2.65e-10
 8 temperature_x_`seasonsSpring_x_holidayNo Holiday`     29.4 2.65e-10
 9 temperature_x_`seasonsSummer_x_holidayNo Holiday`    -68.4 2.65e-10
10 temperature_x_`seasonsWinter_x_holidayNo Holiday`    -26.7 2.65e-10
# ℹ 25 more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="final-fit-plot-of-regression-tree-model" class="level3">
<h3 class="anchored" data-anchor-id="final-fit-plot-of-regression-tree-model">Final fit plot of Regression tree model</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>rpart.plot<span class="sc">::</span><span class="fu">rpart.plot</span>(<span class="fu">extract_fit_parsnip</span>(tree_fit)<span class="sc">$</span>fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Cannot retrieve the data used to build the model (so cannot determine roundint and is.binary for the variables).
To silence this warning:
    Call rpart.plot with roundint=FALSE,
    or rebuild the rpart model with model=TRUE.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: labs do not fit even at cex 0.15, there may be some overplotting</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ST_558_HW9_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variable-importance-plot-of-bagged-tree" class="level3">
<h3 class="anchored" data-anchor-id="variable-importance-plot-of-bagged-tree">Variable importance plot of Bagged Tree</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>vi_tibble <span class="ot">&lt;-</span> bagged_fit<span class="sc">$</span>fit<span class="sc">$</span>fit<span class="sc">$</span>fit<span class="sc">$</span>imp </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>vi_tibble <span class="ot">&lt;-</span> vi_tibble <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(value))</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(vi_tibble, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(term, value), <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Bagged Tree Variable Importance Plot"</span>,</span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Variable"</span>,</span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Importance Value"</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ST_558_HW9_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variable-importance-plot-of-random-forest" class="level3">
<h3 class="anchored" data-anchor-id="variable-importance-plot-of-random-forest">Variable importance plot of random forest</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>rf_parsnip_model <span class="ot">&lt;-</span> <span class="fu">extract_fit_parsnip</span>(rf_fit)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>rf_ranger_model <span class="ot">&lt;-</span> rf_parsnip_model<span class="sc">$</span>fit</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>rf_importance <span class="ot">&lt;-</span> ranger<span class="sc">::</span><span class="fu">importance</span>(rf_ranger_model)</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>rf_importance_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Variable =</span> <span class="fu">names</span>(rf_importance),</span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Importance =</span> rf_importance</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rf_importance_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Variable, Importance), <span class="at">y =</span> Importance)) <span class="sc">+</span></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Random Forest Variable Importance Plot"</span>,</span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Variables"</span>,</span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Importance"</span></span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb80-20"><a href="#cb80-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ST_558_HW9_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="fitting-complete-dataset-on-random-forest-model" class="level2">
<h2 class="anchored" data-anchor-id="fitting-complete-dataset-on-random-forest-model">Fitting complete dataset on Random Forest model</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>final_best_model <span class="ot">&lt;-</span> rf_final</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>final_model_fit <span class="ot">&lt;-</span> <span class="fu">fit</span>(final_best_model, <span class="at">data =</span> df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>